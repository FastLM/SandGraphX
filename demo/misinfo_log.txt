(base) root@dsw-238653-59bcb67999-5kkw2:/mnt/workspace/liudong/SandGraph# python demo/misinformation_spread_demo.py 
🔥 SandGraph Misinformation Spread Demo
============================================================
Steps: 5
🔥 SandGraph Misinformation Spread Demo
============================================================

1. Creating LLM Manager

2. Creating RL Misinformation Workflow

3. Executing 5 Misinformation Intervention Steps

--- 第 1 步 ---
================================================================================
Decision 1 - Complete Prompt Content:
================================================================================
You are a misinformation intervention expert in a social network simulation.

REQUIRED RESPONSE FORMAT:
ACTION: [FACT_CHECK|WARNING_LABEL|DOWNRANK|REMOVE|EDUCATE|PROMOTE_TRUTH] [GENERAL|HIGH_SPREAD|HIGH_BELIEF]
REASONING: [brief explanation]

Available Actions:
1. FACT_CHECK - Verify and debunk false information
2. WARNING_LABEL - Add warning labels to misleading content
3. DOWNRANK - Reduce visibility of false information
4. REMOVE - Remove false information completely
5. EDUCATE - Improve user media literacy
6. PROMOTE_TRUTH - Promote verified true information

Available Targets:
- GENERAL: General intervention across all misinformation
- HIGH_SPREAD: Target high-spread misinformation specifically
- HIGH_BELIEF: Target information with many believers specifically

Network Status:
- Total Users: 100
- Total Connections: 1010
- Network Density: 0.102
Misinformation Status:
- Total Pieces: 5
- Total Spreads: 3
- Believers: 0
- Skeptics: 0
- Belief Ratio: 0.000
User Belief Distribution:
- Believers: 21
- Skeptics: 27
- Neutral: 22
- Disbelievers: 30


Choose the best intervention strategy to combat misinformation. Respond ONLY in the required format above.
================================================================================
Loading checkpoint shards: 100%|██████████████████████████████████████████████████████████████████████████████████████████████| 3/3 [00:01<00:00,  1.77it/s]
The attention mask is not set and cannot be inferred from input because pad token is same as eos token. As a consequence, you may observe unexpected behavior. Please pass your input's `attention_mask` to obtain reliable results.
Both `max_new_tokens` (=256) and `max_length`(=512) seem to have been set. `max_new_tokens` will take precedence. Please refer to the documentation for more information. (https://huggingface.co/docs/transformers/main/en/main_classes/text_generation)
LLM Response Status: unknown
LLM Complete Response: ACTION: EDUCATE [GENERAL]
REASONING: To prevent the spread of misinformation, it is essential to improve the media literacy of users in the network. By educating users, they will be better equipped to identify false information and make informed decisions.
🔍 解析响应: ACTION: EDUCATE [GENERAL]
REASONING: To prevent the spread of misinformation, it is essential to improve the media literacy of users in the network. By educating users, they will be better equipped to...
✅ 找到标准格式ACTION: EDUCATE GENERAL
✅ 找到REASONING: To prevent the spread of misinformation, it is ess...
✅ 解析成功: EDUCATE GENERAL | To prevent the spread of misin...
LLM Decision: EDUCATE GENERAL
Decision Reason: To prevent the spread of misinformation, it is essential to improve the media literacy of users in the network. By educating users, they will be better equipped to identify false information and make informed decisions.
Intervention Success: True
Intervention Score: 0.400
RL Reward: 4.000
Total Misinformation: 5
Total Spreads: 3
Belief Ratio: 0.000

--- 第 2 步 ---
================================================================================
Decision 2 - Complete Prompt Content:
================================================================================
You are a misinformation intervention expert in a social network simulation.

REQUIRED RESPONSE FORMAT:
ACTION: [FACT_CHECK|WARNING_LABEL|DOWNRANK|REMOVE|EDUCATE|PROMOTE_TRUTH] [GENERAL|HIGH_SPREAD|HIGH_BELIEF]
REASONING: [brief explanation]

Available Actions:
1. FACT_CHECK - Verify and debunk false information
2. WARNING_LABEL - Add warning labels to misleading content
3. DOWNRANK - Reduce visibility of false information
4. REMOVE - Remove false information completely
5. EDUCATE - Improve user media literacy
6. PROMOTE_TRUTH - Promote verified true information

Available Targets:
- GENERAL: General intervention across all misinformation
- HIGH_SPREAD: Target high-spread misinformation specifically
- HIGH_BELIEF: Target information with many believers specifically

Network Status:
- Total Users: 100
- Total Connections: 1010
- Network Density: 0.102
Misinformation Status:
- Total Pieces: 5
- Total Spreads: 3
- Believers: 0
- Skeptics: 0
- Belief Ratio: 0.000
User Belief Distribution:
- Believers: 21
- Skeptics: 27
- Neutral: 22
- Disbelievers: 30
Recent Interventions:
- Step 1: EDUCATE - To prevent the spread of misin...

Choose the best intervention strategy to combat misinformation. Respond ONLY in the required format above.
================================================================================
Both `max_new_tokens` (=256) and `max_length`(=512) seem to have been set. `max_new_tokens` will take precedence. Please refer to the documentation for more information. (https://huggingface.co/docs/transformers/main/en/main_classes/text_generation)
LLM Response Status: unknown
LLM Complete Response: ACTION: FACT_CHECK [HIGH_SPREAD]
REASONING: Verifying and debunking false information that has already spread widely in the network can prevent further misinformation propagation and reduce belief in the false claim.
🔍 解析响应: ACTION: FACT_CHECK [HIGH_SPREAD]
REASONING: Verifying and debunking false information that has already spread widely in the network can prevent further misinformation propagation and reduce belief in ...
✅ 找到标准格式ACTION: FACT_CHECK HIGH_SPREAD
✅ 找到REASONING: Verifying and debunking false information that has...
✅ 解析成功: FACT_CHECK HIGH_SPREAD | Verifying and debunking false ...
LLM Decision: FACT_CHECK HIGH_SPREAD
Decision Reason: Verifying and debunking false information that has already spread widely in the network can prevent further misinformation propagation and reduce belief in the false claim.
Intervention Success: True
Intervention Score: 0.700
RL Reward: 7.000
Total Misinformation: 5
Total Spreads: 3
Belief Ratio: 0.000

--- 第 3 步 ---
================================================================================
Decision 3 - Complete Prompt Content:
================================================================================
You are a misinformation intervention expert in a social network simulation.

REQUIRED RESPONSE FORMAT:
ACTION: [FACT_CHECK|WARNING_LABEL|DOWNRANK|REMOVE|EDUCATE|PROMOTE_TRUTH] [GENERAL|HIGH_SPREAD|HIGH_BELIEF]
REASONING: [brief explanation]

Available Actions:
1. FACT_CHECK - Verify and debunk false information
2. WARNING_LABEL - Add warning labels to misleading content
3. DOWNRANK - Reduce visibility of false information
4. REMOVE - Remove false information completely
5. EDUCATE - Improve user media literacy
6. PROMOTE_TRUTH - Promote verified true information

Available Targets:
- GENERAL: General intervention across all misinformation
- HIGH_SPREAD: Target high-spread misinformation specifically
- HIGH_BELIEF: Target information with many believers specifically

Network Status:
- Total Users: 100
- Total Connections: 1010
- Network Density: 0.102
Misinformation Status:
- Total Pieces: 5
- Total Spreads: 3
- Believers: 0
- Skeptics: 0
- Belief Ratio: 0.000
User Belief Distribution:
- Believers: 21
- Skeptics: 27
- Neutral: 22
- Disbelievers: 30
Recent Interventions:
- Step 1: EDUCATE - To prevent the spread of misin...
- Step 2: FACT_CHECK - Verifying and debunking false ...

Choose the best intervention strategy to combat misinformation. Respond ONLY in the required format above.
================================================================================
Both `max_new_tokens` (=256) and `max_length`(=512) seem to have been set. `max_new_tokens` will take precedence. Please refer to the documentation for more information. (https://huggingface.co/docs/transformers/main/en/main_classes/text_generation)
LLM Response Status: unknown
LLM Complete Response: ACTION: FACT_CHECK [HIGH_SPREAD]
REASONING: To prevent further spread of false information and minimize potential harm to users.
🔍 解析响应: ACTION: FACT_CHECK [HIGH_SPREAD]
REASONING: To prevent further spread of false information and minimize potential harm to users....
✅ 找到标准格式ACTION: FACT_CHECK HIGH_SPREAD
✅ 找到REASONING: To prevent further spread of false information and...
✅ 解析成功: FACT_CHECK HIGH_SPREAD | To prevent further spread of f...
LLM Decision: FACT_CHECK HIGH_SPREAD
Decision Reason: To prevent further spread of false information and minimize potential harm to users.
Intervention Success: True
Intervention Score: 0.700
RL Reward: 7.000
Total Misinformation: 5
Total Spreads: 3
Belief Ratio: 0.000

--- 第 4 步 ---
================================================================================
Decision 4 - Complete Prompt Content:
================================================================================
You are a misinformation intervention expert in a social network simulation.

REQUIRED RESPONSE FORMAT:
ACTION: [FACT_CHECK|WARNING_LABEL|DOWNRANK|REMOVE|EDUCATE|PROMOTE_TRUTH] [GENERAL|HIGH_SPREAD|HIGH_BELIEF]
REASONING: [brief explanation]

Available Actions:
1. FACT_CHECK - Verify and debunk false information
2. WARNING_LABEL - Add warning labels to misleading content
3. DOWNRANK - Reduce visibility of false information
4. REMOVE - Remove false information completely
5. EDUCATE - Improve user media literacy
6. PROMOTE_TRUTH - Promote verified true information

Available Targets:
- GENERAL: General intervention across all misinformation
- HIGH_SPREAD: Target high-spread misinformation specifically
- HIGH_BELIEF: Target information with many believers specifically

Network Status:
- Total Users: 100
- Total Connections: 1010
- Network Density: 0.102
Misinformation Status:
- Total Pieces: 5
- Total Spreads: 3
- Believers: 0
- Skeptics: 0
- Belief Ratio: 0.000
User Belief Distribution:
- Believers: 21
- Skeptics: 27
- Neutral: 22
- Disbelievers: 30
Recent Interventions:
- Step 1: EDUCATE - To prevent the spread of misin...
- Step 2: FACT_CHECK - Verifying and debunking false ...
- Step 3: FACT_CHECK - To prevent further spread of f...

Choose the best intervention strategy to combat misinformation. Respond ONLY in the required format above.
================================================================================
Both `max_new_tokens` (=256) and `max_length`(=512) seem to have been set. `max_new_tokens` will take precedence. Please refer to the documentation for more information. (https://huggingface.co/docs/transformers/main/en/main_classes/text_generation)
LLM Response Status: unknown
LLM Complete Response: ACTION: FACT_CHECK [HIGH_SPREAD]
REASONING: The current misinformation pieces have already spread to a significant number of users. By fact-checking and debunking these false claims, we can prevent further spread and potentially reduce the number of believers.
🔍 解析响应: ACTION: FACT_CHECK [HIGH_SPREAD]
REASONING: The current misinformation pieces have already spread to a significant number of users. By fact-checking and debunking these false claims, we can prevent fu...
✅ 找到标准格式ACTION: FACT_CHECK HIGH_SPREAD
✅ 找到REASONING: The current misinformation pieces have already spr...
✅ 解析成功: FACT_CHECK HIGH_SPREAD | The current misinformation pie...
LLM Decision: FACT_CHECK HIGH_SPREAD
Decision Reason: The current misinformation pieces have already spread to a significant number of users. By fact-checking and debunking these false claims, we can prevent further spread and potentially reduce the number of believers.
Intervention Success: True
Intervention Score: 0.700
RL Reward: 7.000
Total Misinformation: 5
Total Spreads: 3
Belief Ratio: 0.000

--- 第 5 步 ---
================================================================================
Decision 5 - Complete Prompt Content:
================================================================================
You are a misinformation intervention expert in a social network simulation.

REQUIRED RESPONSE FORMAT:
ACTION: [FACT_CHECK|WARNING_LABEL|DOWNRANK|REMOVE|EDUCATE|PROMOTE_TRUTH] [GENERAL|HIGH_SPREAD|HIGH_BELIEF]
REASONING: [brief explanation]

Available Actions:
1. FACT_CHECK - Verify and debunk false information
2. WARNING_LABEL - Add warning labels to misleading content
3. DOWNRANK - Reduce visibility of false information
4. REMOVE - Remove false information completely
5. EDUCATE - Improve user media literacy
6. PROMOTE_TRUTH - Promote verified true information

Available Targets:
- GENERAL: General intervention across all misinformation
- HIGH_SPREAD: Target high-spread misinformation specifically
- HIGH_BELIEF: Target information with many believers specifically

Network Status:
- Total Users: 100
- Total Connections: 1010
- Network Density: 0.102
Misinformation Status:
- Total Pieces: 5
- Total Spreads: 3
- Believers: 0
- Skeptics: 0
- Belief Ratio: 0.000
User Belief Distribution:
- Believers: 21
- Skeptics: 27
- Neutral: 22
- Disbelievers: 30
Recent Interventions:
- Step 2: FACT_CHECK - Verifying and debunking false ...
- Step 3: FACT_CHECK - To prevent further spread of f...
- Step 4: FACT_CHECK - The current misinformation pie...

Choose the best intervention strategy to combat misinformation. Respond ONLY in the required format above.
================================================================================
Both `max_new_tokens` (=256) and `max_length`(=512) seem to have been set. `max_new_tokens` will take precedence. Please refer to the documentation for more information. (https://huggingface.co/docs/transformers/main/en/main_classes/text_generation)
LLM Response Status: unknown
LLM Complete Response: ACTION: EDUCATE [HIGH_BELIEF]
REASONING: To improve media literacy among believers and reduce the likelihood of them spreading false information in the future.
🔍 解析响应: ACTION: EDUCATE [HIGH_BELIEF]
REASONING: To improve media literacy among believers and reduce the likelihood of them spreading false information in the future....
✅ 找到标准格式ACTION: EDUCATE HIGH_BELIEF
✅ 找到REASONING: To improve media literacy among believers and redu...
✅ 解析成功: EDUCATE HIGH_BELIEF | To improve media literacy amon...
LLM Decision: EDUCATE HIGH_BELIEF
Decision Reason: To improve media literacy among believers and reduce the likelihood of them spreading false information in the future.
Intervention Success: True
Intervention Score: 0.400
RL Reward: 4.000
Total Misinformation: 5
Total Spreads: 3
Belief Ratio: 0.000

4. Final Results
Total Decisions: 5
Total Reward: 29.000
Average Score: 0.580
RL Training Steps: 0
RL Algorithm: ppo

✅ Demo completed successfully!